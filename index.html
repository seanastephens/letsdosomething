<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="let's do something">
    <meta name="description" content="Facebook powered movie checker">
    <title>Let's Do Something</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
    <link rel="stylesheet" type="text/css" href="default_style.css">
</head>
<body>
    <div id="fb-root"></div>	
    <script type="text/javascript">

    window.fbAsyncInit = function () {
        FB.init({
            appId: '299220656893010',
            status: true, // check login status
            cookie: true, 
            xfbml: true // parse XFBML
        });
    }

    function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    $(document).ready(function () {
        init_fb();
    });

    /***********************************************
   * Drop down menu w/ description- ï¿½ Dynamic Drive (www.dynamicdrive.com)
    * This notice must stay intact for use
     * Visit http://www.dynamicdrive.com/ for full source code
      ***********************************************/

    function init_fb() {
    FB.Event.subscribe('auth.authResponseChange', function (response) {
        // Here we specify what we do with the response anytime this event occurs. 
        if (response.status === 'connected') {
        // The response object is returned with a status field that lets the app know the current
        // login status of the person. In this case, we're handling the situation where they 
        // have logged in to the app.
            testAPI();
        } else if (response.status === 'not_authorized') {
        // In this case, the person is logged into Facebook, but not into the app, so we call
        // FB.login() to prompt them to do so. 
        // In real-life usage, you wouldn't want to immediately prompt someone to login 
        // like this, for two reasons:
        // (1) JavaScript created popup windows are blocked by most browsers unless they 
        // result from direct interaction from people using the app (such as a mouse click)
        // (2) it is a bad experience to be continually prompted to login upon page load.
            FB.login();
        } else {
        // In this case, the person is not logged into Facebook, so we call the login() 
        // function to prompt them to do so. Note that at this stage there is no indication
        // of whether they are logged into the app. If they aren't then they'll see the Login
        // dialog right after they log in to Facebook. 
        // The same caveats as above apply to the FB.login() call here.
            FB.login();
        }
    });
}

// Here we run a very simple test of the Graph API after login is successful. 
// This testAPI() function is only called in those cases. 
    function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function (response) {
    console.log('Good to see you, ' + response.name + '.');
    });
}




// Now, see 2) below for final customization step
var genr;

    function displaydesc(which, descriptionarray, container) {
    if (document.getElementById) {
        document.getElementById(container).innerHTML = descriptionarray[which.selectedIndex];
    }
}
    function assignAll(genre, time, d) {
    assigngenre(genre);
    assigntime(time);
    assigndate(d);
    $(".moviebox").empty();

    var ID;
    var loc;
    FB.api('/me', function (response) {
        ID = response.id;
        loc = response.location;
        });

    $.get('scrape.php', {
        genre: genr,
        user_location: loc,
        uid: ID
        })
    .done(function (data) {
        $(".moviebox").append(data);
        });
    $(".friendbox").empty();
    $.get('friendbox.php', {
        genre: genr
        })
    .done(function (data) {
        $(".friendbox").append(data);
        });
}

    function assigngenre(what) {
    var selectedopt = what.options[what.selectedIndex];
    if (document.getElementById && selectedopt.getAttribute("target") == "newwin") {
        genr = selectedopt.value;
    }
}

    function assigntime(what) {
    var time;
    var selectedopt = what.options[what.selectedIndex];
    if (document.getElementById && selectedopt.getAttribute("target") == "newwin") {
        time = selectedopt.value;
    }
}

    function assigndate(what) {
    var date;
    var selectedopt = what.options[what.selectedIndex];
    if (document.getElementById && selectedopt.getAttribute("target") == "newwin") {
        date = selectedopt.value;
    }
}


//2) Call function displaydesc() for each drop down menu you have on the page
//   This function displays the initial description for the selected menu item
//   displaydesc(name of select menu, name of corresponding text array, ID of SPAN container tag):
//   Important: Remove the calls not in use (ie: 2nd line below if there's only 1 menu on your page)

displaydesc(document.form1.Genre, thetext1, 'textcontainer1');
displaydesc(document.form2.Time, thetext2, 'textcontainer1');
displaydesc(document.form3.Date, thetext3, 'textcontainer1');

    function invite() {
    FB.ui({
        method: 'send',
        user_prompt_message: 'Hi! Join me for a movie today.',
        link: "http://www.google.com", 
    },
    function (response) {
        if (response && response.post_id) {
            alert('Post was published.');
        } else {
            alert('Post was not published.');
        }
    });
}




    </script>
  <div class="friendbox">
	 
</div>
	
	
	<div class="choices">
	<div class="list">
		<form name="form1">
		<select name="Genre" size="1" onchange="displaydesc(document.form1.Genre, thetext1, 'textcontainer1')">
			<option value="0">Movie Genre</option>
			<option selected="selected" value="Action">Action</option>		
			<option value="Horror">Horror</option>
			<option value="Comedy">Comedy</option>
			<option value="Drama">Drama</option>
			<option value="t">t</option>
			<option value="Thriller">Thriller</option>

		</select>

			<span id="textcontainer1" align="left" style="font:italic 18px Arial">
		</span>
		</form>
	</div>
	<div class="list">
		<form name="form2">
		<select name="Time" size="1" onchange="displaydesc(document.form1.Time, thetext2, 'textcontainer1')">
			<option value="0">Time</option>
			<option selected="selected" value="17">5 pm</option>
			<option value="18">6 pm</option>
			<option value="19">7 pm</option>
			<option value="20">8 pm</option>
			<option value="21">9 pm</option>
			<option value="22">10 pm</option>
			<option value="23">11 pm</option>
			<option value="24">12 am</option>
			<option value="1">1 am</option>
			<option value="2">2 am</option>
			<option value="3">3 am</option>
			<option value="4">4 am</option>
			<option value="5">5 am</option>
			<option value="6">6 am</option>
			<option value="7">7 am</option>
			<option value="8">8 am</option>
			<option value="9">9 am</option>
			<option value="10">10 am</option>
			<option value="11">11 am</option>
			<option value="12">12 pm</option>
			<option value="13">1 pm</option>
			<option value="14">2 pm</option>
			<option value="15">3 pm</option>
			<option value="16" target="newwin">4 pm</option>
		</select>
	 	
			<span id="textcontainer2" align="left" style="font:italic 13px Arial">
		</span>
		</form>
	</div>
	<div class="list">
		<form name="form3">
		<select name="Date" size="1" onchange="displaydesc(document.form1.Date, thetext3, 'textcontainer1')">
			<option selectvalue="0">DATE</option>
			<option value="1">Sunday</option>
			<option selected="selected" value="2">Monday</option>
			<option value="3">Tuesday</option>
			<option value="4">Wednesday</option>
			<option value="5">Thursday</option>
			<option value="6">Friday</option>
			<option value="7" target="newwin">Saturday</option>
			</select>
		
		<span id="textcontainer3" align="left" style="font:italic 13px Arial">
		</span>
	 	<input value="Check Movies" onclick="assignAll(document.form1.Genre, document.form2.Time,document.form3.Date)" type="button"><br>
			
			
	</form>
	</div>
	</div>

	<div class="moviebox">
	
	</div>
	




	
	




</body></html>
